var bloglists;var entries;function init(){$.get("/bloglists",function(A){bloglists=$.parseJSON(A);var C=0;if(bloglists!==null){for(var B=0;B<bloglists.length;B++){if(bloglists[B].blogs.length==0){continue}if(B==C){$("#selection").append('<option selected="selected" value="'+B+'">'+bloglists[B].name+"</option>")}else{$("#selection").append('<option value="'+B+'">'+bloglists[B].name+"</option>")}}$(".list").click(function(D){displayBlogs(bloglists,D.currentTarget.id.split(".")[1]);$(".list").removeClass("current");$(D.currentTarget).addClass("current")});$("#selection").change(function(D){listId=D;displayBlogs(bloglists,$("#selection option:selected").val())});displayBlogs(bloglists,C)}})}window.onload=init;function displayBlogs(D,F){var C=7;var A=new Array();for(var B=0;B<D[F].blogs.length;B++){A.push(D[F].blogs[B].xmlUrl)}entries=new Array();for(var B=0;B<A.length;B++){var E=new google.feeds.Feed(A[B]);E.setNumEntries(C);E.load(function(G){if(!G.error){entries=entries.concat(G.feed.entries);if(entries.length==A.length*C){displayResults(entries)}}})}}function generatePostHtml(L,K,F,E,C,G){var A=document.createElement("div");var I=document.createElement("a");I.href="javascript:void(0)";I.className="more";I.innerHTML="MORE";A.appendChild(I);I=document.createElement("a");I.href="javascript:void(0)";I.className="less";I.innerHTML="LESS";A.appendChild(I);A.className="blogpost";var D=document.createElement("img");if(L!=undefined){D.src=L;D.alt="Blog post image";D.className="blogpost_image";A.appendChild(D)}var H=document.createElement("h2");var B=document.createElement("a");B.href=F+"?utm_source=osblogaggregator";B.target="_blank";B.innerHTML=K;var J=document.createElement("span");J.className="blogpost_source";J.innerHTML=C;H.appendChild(B);$(H).append(" - ");H.appendChild(J);A.appendChild(H);$(A).append(G);return A}function strip(B){var A=document.createElement("DIV");A.innerHTML=B;return A.textContent||A.innerText}function slidePostDown(B){var A=$(tere).css("height","auto").height();$(tere).css("height","90px");$(tere).animate({height:A+"px"},1000)}function sortfunction(B,A){var C=new Date(B.publishedDate);var D=new Date(A.publishedDate);if(C>D){return -1}else{if(C<D){return 1}else{return 0}}}function displayResults(A){A.sort(sortfunction);var B=document.getElementById("postContainer");$(B).html("");for(var C=0;C<A.length;C++){var E=A[C];var F=undefined;try{F=$(E.content).find("img").eq(0).attr("src")}catch(D){}B.appendChild(generatePostHtml(F,E.title,E.link,"sourceUrl",E.author,E.content+E.publishedDate))}B.appendChild(document.createElement("br"));$(".more").click(function(I){var H=I.currentTarget.parentNode;if($(H).height()==120){var G=$(H).css("height","auto").height();$(H).css("height","120px");$(H).animate({height:G+"px"},500);I.currentTarget.innerHTML="LESS";$(H).children(".less").show(500)}else{$(H).animate({height:"120px"},500);$(H).children(".less").hide(500);I.currentTarget.innerHTML="MORE"}});$(".less").click(function(H){var G=H.currentTarget.parentNode;$(G).children(".more").html("MORE");$(G).animate({height:"120px"},500);$(H.currentTarget).hide()});$(".blogpost table").hide();$(".blogpost img:nth-child(1)").hide();$(".blogpost_image").css("max-width","150px")};